{
  "hash": "898efec479589f21e32527da61a15936",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Exercise 1\"\ndate: \"May 1, 2025\"\ndate-modified: \"last-modified\"\nauthor: \"Ng Jin Yao\"\nformat: html\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n\n\n# Overview\n\n## Setting the scene\n\nA local online media company that publishes daily content on digital platforms is planning to release an article on **demographic structures and distribution of Singapore in 2024**.\n\n## The task\n\nAssuming the role of the graphical editor of the media company, you are tasked to prepare **at most three data visualisation for the article**.\n\nThe data should be processed by using appropriate¬†**tidyverse**¬†family of packages and the data visualisation must be prepared using¬†**ggplot2**¬†and its extensions.\n\n# Getting started\n\n## Loading packages\n\nThe following R packages are loaded using pacman::p_load() on top of the tidyverse packages:\n\n-   ggrepel: an R package provides geoms for ggplot2 to repel overlapping text labels.\n-   ggthemes: an R package provides some extra themes, geoms, and scales for ‚Äòggplot2‚Äô.\n-   patchwork: an R package for preparing composite figure created using ggplot2.\n-   dplyr: an R package for data manipulation with the tidyverse package\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, ggplot2, ggrepel, patchwork, \n               ggthemes,dplyr, xml12,sf) \n```\n:::\n\n\n\n\n\n## Import data\n\nThe dataset \"[Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024](https://www.singstat.gov.sg/-/media/files/find_data/population/statistical_tables/respopagesexfa2024.ashx)\" retrieved from the [Department of Statistics, Singapore (DOS)](https://www.singstat.gov.sg/) will be used.\n\nWe will be importing this dataset as \"sgResData24\"\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsgResData24 <- read_csv(\"data/respopagesex2024.csv\")\n```\n:::\n\n\n\n\n\n## Data pre-processing\n\nWe first take a look at the data and check for:\n\n1.  Any missing/NULL values or entries\n\n2.  Correct column data type\n\n3.  Any duplicate entries\n\n::: panel-tabset\n## Preview of the dataset\n\nThe dim() and head() functions to view the dimensions and preview the first few rows of the dataset using the code below:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(sgResData24)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 60424     6\n```\n\n\n:::\n\n```{.r .cell-code}\nhead(sgResData24)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 √ó 6\n  PA         SZ                     Age   Sex       Pop  Time\n  <chr>      <chr>                  <chr> <chr>   <dbl> <dbl>\n1 Ang Mo Kio Ang Mo Kio Town Centre 0     Males      10  2024\n2 Ang Mo Kio Ang Mo Kio Town Centre 0     Females    10  2024\n3 Ang Mo Kio Ang Mo Kio Town Centre 1     Males      10  2024\n4 Ang Mo Kio Ang Mo Kio Town Centre 1     Females    10  2024\n5 Ang Mo Kio Ang Mo Kio Town Centre 2     Males      10  2024\n6 Ang Mo Kio Ang Mo Kio Town Centre 2     Females    10  2024\n```\n\n\n:::\n:::\n\n\n\n\n\n## Descriptive Statistics\n\nThe summary() function is used to view the basic descriptive statistics for each column, including the minimum, maximum, mean and quartiles.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(sgResData24)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      PA                 SZ                Age                Sex           \n Length:60424       Length:60424       Length:60424       Length:60424      \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n      Pop              Time     \n Min.   :   0.0   Min.   :2024  \n 1st Qu.:   0.0   1st Qu.:2024  \n Median :  20.0   Median :2024  \n Mean   :  69.4   Mean   :2024  \n 3rd Qu.:  90.0   3rd Qu.:2024  \n Max.   :1180.0   Max.   :2024  \n```\n\n\n:::\n:::\n\n\n\n\n\n## Checking for duplicate values\n\nThe distinct() function is used to check if there are any duplicate values. The distinct() function returns unique rows.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndistinct(sgResData24)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 60,424 √ó 6\n   PA         SZ                     Age   Sex       Pop  Time\n   <chr>      <chr>                  <chr> <chr>   <dbl> <dbl>\n 1 Ang Mo Kio Ang Mo Kio Town Centre 0     Males      10  2024\n 2 Ang Mo Kio Ang Mo Kio Town Centre 0     Females    10  2024\n 3 Ang Mo Kio Ang Mo Kio Town Centre 1     Males      10  2024\n 4 Ang Mo Kio Ang Mo Kio Town Centre 1     Females    10  2024\n 5 Ang Mo Kio Ang Mo Kio Town Centre 2     Males      10  2024\n 6 Ang Mo Kio Ang Mo Kio Town Centre 2     Females    10  2024\n 7 Ang Mo Kio Ang Mo Kio Town Centre 3     Males      10  2024\n 8 Ang Mo Kio Ang Mo Kio Town Centre 3     Females    10  2024\n 9 Ang Mo Kio Ang Mo Kio Town Centre 4     Males      30  2024\n10 Ang Mo Kio Ang Mo Kio Town Centre 4     Females    10  2024\n# ‚Ñπ 60,414 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\nFrom the output of distinct() there are 75,696 x 7 rows returned, showing that there are no duplicated rows in the dataset.\n:::\n\nUsing the count() function, we can get the unique values/names from each column\n\n::: panel-tabset\n## PA Column Count\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(sgResData24,PA)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 55 √ó 2\n   PA                          n\n   <chr>                   <int>\n 1 Ang Mo Kio               2184\n 2 Bedok                    1456\n 3 Bishan                    546\n 4 Boon Lay                  728\n 5 Bukit Batok              1638\n 6 Bukit Merah              3094\n 7 Bukit Panjang            1274\n 8 Bukit Timah              1456\n 9 Central Water Catchment   182\n10 Changi                    546\n# ‚Ñπ 45 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\nThere are 55 unique planning areas\n\n## SZ Column Count\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(sgResData24,SZ)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 332 √ó 2\n   SZ                         n\n   <chr>                  <int>\n 1 Admiralty                182\n 2 Airport Road             182\n 3 Alexandra Hill           182\n 4 Alexandra North          182\n 5 Aljunied                 182\n 6 Anak Bukit               182\n 7 Anchorvale               182\n 8 Ang Mo Kio Town Centre   182\n 9 Anson                    182\n10 Bahar                    182\n# ‚Ñπ 322 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\nThere are 332 unique subzones\n\n## AG Column Count\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(sgResData24,Age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 91 √ó 2\n   Age       n\n   <chr> <int>\n 1 0       664\n 2 1       664\n 3 10      664\n 4 11      664\n 5 12      664\n 6 13      664\n 7 14      664\n 8 15      664\n 9 16      664\n10 17      664\n# ‚Ñπ 81 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n## Sex Column Count\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(sgResData24,Sex)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 √ó 2\n  Sex         n\n  <chr>   <int>\n1 Females 30212\n2 Males   30212\n```\n\n\n:::\n:::\n\n\n\n\n\nThere are only 2 Sex groups - Male and Female\n\n## Time Column Count\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(sgResData24,Time)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 √ó 2\n   Time     n\n  <dbl> <int>\n1  2024 60424\n```\n\n\n:::\n:::\n\n\n\n\n\nThere is only 1 unique group for time, the year 2024, for all the rows in the dataset\n:::\n\n::: callout-note\n## üßêObservations and notes for this dataset\n\n-   There are 60,424 rows and 6 columns of data.\n\n-   There are no duplicate rows/ values\n\n-   Column Definition and Unique Values Count 6 Columns (5 Group and 1 Count):\n\n    -   PA - Planning Area (55 unique)\n\n    -   SZ - Subzone (332 unique)\n\n    -   Age - Age of Residents\n\n    -   Sex - Sex (2 unique)\n\n    -   Time - Time/ Period (1 unique)\n\n    -   Pop - Resident Count\n:::\n\n## aggregating age group\n\nPerform data transformation on Age column which is a Chr column and create a new column called age group aggregating the age groups of the population together for use in the visualisations\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsgResData24 <- sgResData24 %>%\n  mutate(\n    # Convert age to numeric, handle \"90_and_Over\"\n    Age_num = case_when(\n      Age == \"90_and_Over\" ~ 90,\n      TRUE ~ suppressWarnings(as.numeric(Age))  # Avoid warnings from \"90_and_Over\"\n    ),\n    \n    # Group into age bands\n    Age_group = case_when(\n      Age_num >= 0 & Age_num <= 9   ~ \"0-9\",\n      Age_num >= 10 & Age_num <= 19 ~ \"10-19\",\n      Age_num >= 20 & Age_num <= 29 ~ \"20-29\",\n      Age_num >= 30 & Age_num <= 39 ~ \"30-39\",\n      Age_num >= 40 & Age_num <= 49 ~ \"40-49\",\n      Age_num >= 50 & Age_num <= 59 ~ \"50-59\",\n      Age_num >= 60 & Age_num <= 69 ~ \"60-69\",\n      Age_num >= 70 & Age_num <= 79 ~ \"70-79\",\n      Age_num >= 80 & Age_num <= 89 ~ \"80-89\",\n      Age_num >= 90                ~ \"90_and_Over\",\n      TRUE                         ~ NA_character_\n    )\n  )\n\nprint(sgResData24)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 60,424 √ó 8\n   PA         SZ                     Age   Sex       Pop  Time Age_num Age_group\n   <chr>      <chr>                  <chr> <chr>   <dbl> <dbl>   <dbl> <chr>    \n 1 Ang Mo Kio Ang Mo Kio Town Centre 0     Males      10  2024       0 0-9      \n 2 Ang Mo Kio Ang Mo Kio Town Centre 0     Females    10  2024       0 0-9      \n 3 Ang Mo Kio Ang Mo Kio Town Centre 1     Males      10  2024       1 0-9      \n 4 Ang Mo Kio Ang Mo Kio Town Centre 1     Females    10  2024       1 0-9      \n 5 Ang Mo Kio Ang Mo Kio Town Centre 2     Males      10  2024       2 0-9      \n 6 Ang Mo Kio Ang Mo Kio Town Centre 2     Females    10  2024       2 0-9      \n 7 Ang Mo Kio Ang Mo Kio Town Centre 3     Males      10  2024       3 0-9      \n 8 Ang Mo Kio Ang Mo Kio Town Centre 3     Females    10  2024       3 0-9      \n 9 Ang Mo Kio Ang Mo Kio Town Centre 4     Males      30  2024       4 0-9      \n10 Ang Mo Kio Ang Mo Kio Town Centre 4     Females    10  2024       4 0-9      \n# ‚Ñπ 60,414 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n## Bar Chart by Region\n\nAggregate town into NSEW Regions of Singapore referencing the URA 2019 masterplan map data\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(sgResData24) # Provides a concise summary of the data frame\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 60,424\nColumns: 8\n$ PA        <chr> \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang‚Ä¶\n$ SZ        <chr> \"Ang Mo Kio Town Centre\", \"Ang Mo Kio Town Centre\", \"Ang Mo ‚Ä¶\n$ Age       <chr> \"0\", \"0\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", \"4\", \"4\", \"5\", \"5\", ‚Ä¶\n$ Sex       <chr> \"Males\", \"Females\", \"Males\", \"Females\", \"Males\", \"Females\", ‚Ä¶\n$ Pop       <dbl> 10, 10, 10, 10, 10, 10, 10, 10, 30, 10, 20, 10, 20, 30, 30, ‚Ä¶\n$ Time      <dbl> 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, ‚Ä¶\n$ Age_num   <dbl> 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, ‚Ä¶\n$ Age_group <chr> \"0-9\", \"0-9\", \"0-9\", \"0-9\", \"0-9\", \"0-9\", \"0-9\", \"0-9\", \"0-9‚Ä¶\n```\n\n\n:::\n\n```{.r .cell-code}\nstr(sgResData24)     # Shows the structure and data type of each column\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntibble [60,424 √ó 8] (S3: tbl_df/tbl/data.frame)\n $ PA       : chr [1:60424] \"Ang Mo Kio\" \"Ang Mo Kio\" \"Ang Mo Kio\" \"Ang Mo Kio\" ...\n $ SZ       : chr [1:60424] \"Ang Mo Kio Town Centre\" \"Ang Mo Kio Town Centre\" \"Ang Mo Kio Town Centre\" \"Ang Mo Kio Town Centre\" ...\n $ Age      : chr [1:60424] \"0\" \"0\" \"1\" \"1\" ...\n $ Sex      : chr [1:60424] \"Males\" \"Females\" \"Males\" \"Females\" ...\n $ Pop      : num [1:60424] 10 10 10 10 10 10 10 10 30 10 ...\n $ Time     : num [1:60424] 2024 2024 2024 2024 2024 ...\n $ Age_num  : num [1:60424] 0 0 1 1 2 2 3 3 4 4 ...\n $ Age_group: chr [1:60424] \"0-9\" \"0-9\" \"0-9\" \"0-9\" ...\n```\n\n\n:::\n\n```{.r .cell-code}\nhead(sgResData24)    # Displays the first few rows of the data frame\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 √ó 8\n  PA         SZ                     Age   Sex       Pop  Time Age_num Age_group\n  <chr>      <chr>                  <chr> <chr>   <dbl> <dbl>   <dbl> <chr>    \n1 Ang Mo Kio Ang Mo Kio Town Centre 0     Males      10  2024       0 0-9      \n2 Ang Mo Kio Ang Mo Kio Town Centre 0     Females    10  2024       0 0-9      \n3 Ang Mo Kio Ang Mo Kio Town Centre 1     Males      10  2024       1 0-9      \n4 Ang Mo Kio Ang Mo Kio Town Centre 1     Females    10  2024       1 0-9      \n5 Ang Mo Kio Ang Mo Kio Town Centre 2     Males      10  2024       2 0-9      \n6 Ang Mo Kio Ang Mo Kio Town Centre 2     Females    10  2024       2 0-9      \n```\n\n\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}