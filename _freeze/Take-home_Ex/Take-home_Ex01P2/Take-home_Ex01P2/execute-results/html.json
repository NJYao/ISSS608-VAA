{
  "hash": "95d1532bd7dab5ec746c158fe6cbdd77",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Exercise 1 Part 2\"\ndate: \"May 7, 2025\"\ndate-modified: \"last-modified\"\nauthor: \"Ng Jin Yao\"\nformat: html\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# Take Home Exercise 1 Part 2\n\n## The Task\n\n-   Selecting one submission provided by your classmate, critic three good design principles and three areas for further improvement. With reference to the comment, prepare the makeover version of the data visualisation.\n\n## Selected Visualisation and Feedback\n\nSelected Visualisation: [Marga Thura](https://isss608-ay2024-2025.netlify.app/take-home_ex/take-home_ex01/take-home_ex01): Section 3, Plot 2\n\n![](images/clipboard-1580375219.png){fig-align=\"center\"}\n\n### 3 Good Design Principles\n\n1.  Usage of thousands separator in data labels and axis to improve readability for numbers\n\n2.  X-axis labels are tilted in an angle to help with readability for the Planning Area groups\n\n3.  Soft gridlines with a lighter shade than the barchart bar fill colors are used that do not distract from the main barchart data\n\n### 3 Areas of Improvement:\n\n1.  Choice of color for the bars - a darker color can be used to further improve the contrast of the bar graph from the page\n\n2.  Alignment of Data labels with respective bars and data labels can be adjusted so that the labels do not exceed the plot area\n\n3.  Current graph has too many groups and the number difference is too wide - the graphs can be split to focus on top and bottom 10 populations and focus on these groups instead to improve clarity as it allows graphs to show lesser groups and adjust scaling accordingly for clarity\n\n## Replicating Data Loading and Cleaning.\n\nI replicated the data loading and cleaning of data using the code provided from Marga's Take-home Exercise 1 page:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary library\nlibrary(readr)\n\n# Read the CSV file from the specified relative path\nrespopagesex2024 <- read_csv(\"data/respopagesex2024.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, ggrepel, ggthemes, \n               hrbrthemes, patchwork, \n               haven, ggiraph, plotly, DT, \n               knitr, scales,\n               ggridges, ggpubr, \n               gganimate, gapminder, ggdist, \n               ggtext, ggalt,\n               cowplot)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(dplyr)\n\n# Load the dataset\nrespop <- read_csv(\"data/respopagesex2024.csv\")\n\n# Convert types and clean\nrespop_clean <- respop %>%\n  mutate(\n    Pop = as.numeric(Pop),\n    Age = as.numeric(Age),\n    PA = as.factor(PA),\n    SZ = as.factor(SZ),\n    Sex = factor(Sex, levels = c(\"Males\", \"Females\"))\n  ) %>%\n  filter(!is.na(Pop), Pop > 0)\nprint(respop_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 37,243 × 6\n   PA         SZ                       Age Sex       Pop  Time\n   <fct>      <fct>                  <dbl> <fct>   <dbl> <dbl>\n 1 Ang Mo Kio Ang Mo Kio Town Centre     0 Males      10  2024\n 2 Ang Mo Kio Ang Mo Kio Town Centre     0 Females    10  2024\n 3 Ang Mo Kio Ang Mo Kio Town Centre     1 Males      10  2024\n 4 Ang Mo Kio Ang Mo Kio Town Centre     1 Females    10  2024\n 5 Ang Mo Kio Ang Mo Kio Town Centre     2 Males      10  2024\n 6 Ang Mo Kio Ang Mo Kio Town Centre     2 Females    10  2024\n 7 Ang Mo Kio Ang Mo Kio Town Centre     3 Males      10  2024\n 8 Ang Mo Kio Ang Mo Kio Town Centre     3 Females    10  2024\n 9 Ang Mo Kio Ang Mo Kio Town Centre     4 Males      30  2024\n10 Ang Mo Kio Ang Mo Kio Town Centre     4 Females    10  2024\n# ℹ 37,233 more rows\n```\n\n\n:::\n:::\n\n\n\n::: callout-note\n## Adjustment Made:\n\nMade an adjustment to use the cleaned dataset which was cleaned above for the summary\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  library(readr)\n  library(dplyr)\n  library(ggplot2)\n  library(scales)\n\n  # Load and summarize population data\n  # respopagesex2024 <- read_csv(\"TakeHome_01/respopagesex2024.csv\")\n  #pop_by_pa <- respopagesex2024 %>% \n  pop_by_pa <- respop_clean %>%  #adjusted to use the cleaned dataset\n    mutate(Pop = as.numeric(Pop)) %>%\n    filter(!is.na(Pop) & Pop > 0) %>%\n    group_by(PA) %>%\n    summarise(Total_Pop = sum(Pop, na.rm = TRUE))\n\n  # Check population range\n  print(summary(pop_by_pa$Total_Pop))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n    140    8432   94700   99846  157685  284950 \n```\n\n\n:::\n:::\n\n\n\n```         \n```\n\n## Makeover Version of Visualisation\n\n**Adjustments I have made to Marga's original graph based on the 3 Areas of Improvement feedback:**\n\n-   Choice of color for the bars - a darker color can be used to further improve the contrast of the bar graph from the page:\n\n::: callout-note\n## Adjustment #1:\n\nAdjusted fill color for geombar plot from \"grey70\" to a darker \"grey40\"\n:::\n\n-   Alignment of Data labels with respective bars and data labels can be adjusted so that the labels do not exceed the plot area:\n\n::: callout-note\n## Adjustment #2:\n\nAdjusted geom_text hjust and vjust values to centre data labels to the respective bars in the chart\n:::\n\n-   Current graph has too many groups and the number difference is too wide - the graphs can be split to focus on top and bottom 10 populations and focus on these groups instead to improve clarity as it allows graphs to show lesser groups and adjust scaling accordingly for clarity:\n\n::: callout-note\n## Adjustment #3:\n\n1.  Flipped the axis for population and planning area for better clarity\n\n2.  Adjusted the visualisation to generate plot1 for top 10 population PAs and plot2 for bottom 10 population PAs. Then generated a composite figure of plot1 and plot2 together using the patchwork extension\n\n3.  Other miscellaneous adjustments to text size, axis limits to accommodate aesthetic adjustments for plot1, plot2 and the composite graph\n:::\n\n::: panel-tabset\n## Composite Visualisation (using patchwork)\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(patchwork)\nplot1 / plot2\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01P2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n## Cleaning Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Disable scientific notation globally\noptions(scipen = 999)\n\n# Load data\nrespopagesex2024 <- read_csv(\"data/respopagesex2024.csv\")\n\n# Trim whitespace from PA and SZ\nrespopagesex2024 <- respopagesex2024 %>%\n  mutate(\n    PA = trimws(PA),\n    SZ = trimws(SZ)\n  )\n\n# Clean and summarize population by PA, including subzone count\npop_by_pa <- respopagesex2024 %>%\n  mutate(Pop = as.numeric(Pop)) %>%\n  filter(!is.na(Pop) & Pop > 0) %>%\n  group_by(PA) %>%\n  summarise(\n    Total_Pop = sum(Pop, na.rm = TRUE),\n    Num_Subzones = n_distinct(SZ)  # Count unique subzones per PA\n  ) %>%\n  arrange(desc(Total_Pop))\n```\n:::\n\n\n\n## Creating Bar Chart for Top 10 PAs\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create bar chart for top 10\ntop_n <- 10  \ntop_pa <- pop_by_pa %>%\n  slice_max(order_by = Total_Pop, n = top_n)\n\nplot1 <- ggplot(data = top_pa, aes(x = reorder(PA, Total_Pop), y = Total_Pop)) +\n  geom_bar(stat = \"identity\", fill = \"grey40\", color = \"grey90\") +\n  geom_text(\n    aes(label = comma(Total_Pop)),\n    #angle = 90,\n    hjust = -0.2,\n    vjust = 0.4,\n    size = 3\n  ) +\n  coord_flip()+\n  theme_bw() +\n  ggtitle(paste(\"Top\", top_n, \"Planning Areas by Population (2024)\")) +\n  xlab(\"Planning Area\") +\n  ylab(\"Total Population\") +\n  #theme(axis.text.x = element_text(angle = 55, hjust = 1)) +\n  scale_y_continuous(\n  labels = comma,\n  breaks = seq(0, 310000, by = 100000),\n  limits = c(0, 310000)\n)\n\nprint(plot1)\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01P2_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## Creating Bar Chart for Bottom 10 PAs\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create bar chart for btm 10\nbtm_n <- 10  # \nbtm_pa <- pop_by_pa %>%\n  slice_min(order_by = Total_Pop, n = btm_n)\n\nplot2 <- ggplot(data = btm_pa, aes(x = reorder(PA, Total_Pop), y = Total_Pop)) +\n  geom_bar(stat = \"identity\", fill = \"grey40\", color = \"grey90\") +\n  geom_text(\n    aes(label = comma(Total_Pop)),\n    #angle = 90,\n    hjust = -0.2,\n    vjust = 0.4,\n    size = 3\n  ) +\n  coord_flip()+\n  theme_bw() +\n  ggtitle(paste(\"Bottom\", btm_n, \"Planning Areas by Population (2024)\")) +\n  xlab(\"Planning Area\") +\n  ylab(\"Total Population\") +\n  #theme(axis.text.x = element_text(angle = 55, hjust = 1)) +\n  scale_y_continuous(\n  labels = comma,\n  breaks = seq(0, 5000, by = 1000),\n  limits = c(0, 5000)\n)\n\nprint(plot2)\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01P2_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n:::\n",
    "supporting": [
      "Take-home_Ex01P2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}